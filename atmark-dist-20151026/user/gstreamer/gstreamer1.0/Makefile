#
# Makefile for gstreamer1.0-1.0.8
#

SRC_DIR = gstreamer1.0-1.0.8
INSTALL_DIR = install
BUILD_DIR = build
INSTALL_PLUGINDIR = $(INSTALL_DIR)/lib/gstreamer-1.0
INSTALL_PLUGINSCANNERDIR = $(INSTALL_DIR)/libexec/gstreamer-1.0
CROSS_LIBDIR = /usr/$(CROSS_COMPILE:-=)/lib

CONF_BUILD = $(shell $(SRC_DIR)/config.guess)
CONF_HOST = $(shell $(SRC_DIR)/config.sub $(CROSS:-=))

CONFIGURE_OPT =	--disable-nls				\
		--disable-debug				\
		--disable-examples			\
		--disable-tests				\
		--disable-failing-tests			\
		--disable-check				\
		--disable-benchmarks			\
		--enable-introspection=no		\
		--prefix=""				\
		--build=$(CONF_BUILD)			\
		--host=$(CONF_HOST)			\
		--cache-file=`pwd`/../$(CONF_BUILD)/config.cache	\
		CC="$(CC)"				\
		CFLAGS="$(CFLAGS)"			\
		LDFLAGS="$(LDFLAGS)"			\
		LIBS="$(LDLIBS)"

TOOLS_y =
TOOLS_$(CONFIG_USER_GSTREAMER_1_0_INSPECT)	+= gst-inspect-1.0
TOOLS_$(CONFIG_USER_GSTREAMER_1_0_LAUNCH)	+= gst-launch-1.0
TOOLS_$(CONFIG_USER_GSTREAMER_1_0_TYPEFIND)	+= gst-typefind-1.0

PLUGINS_y = 
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_1394)		+= libgst1394.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AASINK)		+= libgstaasink.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMAACDEC)		+= libgstacmaacdec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMAACENC)		+= libgstacmaacenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMFBDEVSINK)	+= libgstacmfbdevsink.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMH264DEC)		+= libgstacmh264dec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMH264ENC)		+= libgstacmh264enc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ACMJPEGENC)		+= libgstacmjpegenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ADDER)		+= libgstadder.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ADPCMDEC)		+= libgstadpcmdec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ADPCMENC)		+= libgstadpcmenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ALAW)		+= libgstalaw.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ALPHA)		+= libgstalpha.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ALPHACOLOR)		+= libgstalphacolor.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ALSA)		+= libgstalsa.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_APETAG)		+= libgstapetag.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_APP)			+= libgstapp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ASFMUX)		+= libgstasfmux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ASSRENDER)		+= libgstassrender.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIOCONVERT)	+= libgstaudioconvert.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIOFX)		+= libgstaudiofx.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIOPARSERS)	+= libgstaudioparsers.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIORATE)		+= libgstaudiorate.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIORESAMPLE)	+= libgstaudioresample.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIOTESTSRC)	+= libgstaudiotestsrc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUDIOVISUALIZERS)	+= libgstaudiovisualizers.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUPARSE)		+= libgstauparse.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUTOCONVERT)		+= libgstautoconvert.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AUTODETECT)		+= libgstautodetect.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AVI)			+= libgstavi.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_AVVIDEOSCALE)	+= libgstavscale.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_BAYER)		+= libgstbayer.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_BZ2)			+= libgstbz2.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_CACASINK)		+= libgstcacasink.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_CAMERABIN)		+= libgstcamerabin2.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_CDPARANOIA)		+= libgstcdparanoia.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_COLOREFFECTS)	+= libgstcoloreffects.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_CURL)		+= libgstcurl.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_CUTTER)		+= libgstcutter.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DATAURISRC)		+= libgstdataurisrc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DEBUG)		+= libgstdebug.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DEBUGUTILSBAD)	+= libgstdebugutilsbad.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DEINTERLACE)		+= libgstdeinterlace.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DTMF)		+= libgstdtmf.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DTSDEC)		+= libgstdtsdec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DV)			+= libgstdv.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DVB)			+= libgstdvb.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DVBSUBOVERLAY)	+= libgstdvbsuboverlay.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_DVDSPU)		+= libgstdvdspu.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_EFFECTV)		+= libgsteffectv.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_EGLGLESSINK)		+= libgsteglglessink.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ENCODING)		+= libgstencodebin.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_EQUALIZER)		+= libgstequalizer.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FAAD)		+= libgstfaad.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FBDEVSINK)		+= libgstfbdevsink.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FESTIVAL)		+= libgstfestival.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FIELDANALYSIS)	+= libgstfieldanalysis.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FLAC)		+= libgstflac.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FLITE)		+= libgstflite.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FLV)			+= libgstflv.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FLXDEC)		+= libgstflxdec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FRAGMENTED)		+= libgstfragmented.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_FREI0R)		+= libgstfrei0r.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GAUDIEFFECTS)	+= libgstgaudieffects.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GDKPIXBUF)		+= libgstgdkpixbuf.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GDP)			+= libgstgdp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GEOMETRICTRANSFORM)	+= libgstgeometrictransform.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GIO)			+= libgstgio.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GMEDEC)		+= libgstgme.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GOOM)		+= libgstgoom.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GOOM2K1)		+= libgstgoom2k1.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GSM)			+= libgstgsm.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_GSTSIREN)		+= libgstsiren.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ICYDEMUX)		+= libgsticydemux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ID3DEMUX)		+= libgstid3demux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ID3TAG)		+= libgstid3tag.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_IMAGEFREEZE)		+= libgstimagefreeze.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_INTER)		+= libgstinter.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_INTERLACE)		+= libgstinterlace.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_INTERLEAVE)		+= libgstinterleave.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ISOMP4)		+= libgstisomp4.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_JACK)		+= libgstjack.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_JPEG)		+= libgstjpeg.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_JPEGFORMAT)		+= libgstjpegformat.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_LEVEL)		+= libgstlevel.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_LIBAV)		+= libgstlibav.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_LIBVISUAL)		+= libgstlibvisual.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_LIVEADDER)		+= libgstliveadder.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MATROSKA)		+= libgstmatroska.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MIMIC)		+= libgstmimic.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MMS)			+= libgstmms.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MODPLUG)		+= libgstmodplug.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MONOSCOPE)		+= libgstmonoscope.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MPEGPSDEMUX)		+= libgstmpegpsdemux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MPEGPSMUX)		+= libgstmpegpsmux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MPEGTSDEMUX)		+= libgstmpegtsdemux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MPEGTSMUX)		+= libgstmpegtsmux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MPG123)		+= libgstmpg123.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MULAW)		+= libgstmulaw.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MULTIFILE)		+= libgstmultifile.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_MULTIPART)		+= libgstmultipart.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_NAVIGATIONTEST)	+= libgstnavigationtest.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_OGG)			+= libgstogg.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_OPUS)		+= libgstopus.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_OSS4)		+= libgstoss4audio.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_OSSAUDIO)		+= libgstossaudio.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_PCAPPARSE)		+= libgstpcapparse.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_PLAYBACK)		+= libgstplayback.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_PNG)			+= libgstpng.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_PNM)			+= libgstpnm.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RAWPARSE)		+= libgstrawparse.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_REMOVESILENCE)	+= libgstremovesilence.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_REPLAYGAIN)		+= libgstreplaygain.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RESINDVD)		+= libgstresindvd.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTMP)		+= libgstrtmp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTP)			+= libgstrtp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTPMANAGER)		+= libgstrtpmanager.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTPMUX)		+= libgstrtpmux.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTPVP8)		+= libgstrtpvp8.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_RTSP)		+= libgstrtsp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SCALETEMPO)		+= libgstscaletempoplugin.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SCHRO)		+= libgstschro.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SDP)			+= libgstsdpelem.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SEGMENTCLIP)		+= libgstsegmentclip.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SHAPEWIPE)		+= libgstshapewipe.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SHM)			+= libgstshm.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SHOUT2SEND)		+= libgstshout2.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SMOOTH)		+= libgstsmooth.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SMPTE)		+= libgstsmpte.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SOUNDTOUCH)		+= libgstsoundtouch.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SOUP)		+= libgstsouphttpsrc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SPANDSP)		+= libgstspandsp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SPECTRUM)		+= libgstspectrum.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SPEED)		+= libgstspeed.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SPEEX)		+= libgstspeex.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SUBENC)		+= libgstsubenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_SUBPARSE)		+= libgstsubparse.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_TAGLIB)		+= libgsttaglib.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_TCP)			+= libgsttcp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_THEORA)		+= libgsttheora.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_TYPEFINDFUNCTIONS)	+= libgsttypefindfunctions.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_UDP)			+= libgstudp.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEO4LINUX2)	+= libgstvideo4linux2.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOBOX)		+= libgstvideobox.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOCONVERT)	+= libgstvideoconvert.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOCROP)		+= libgstvideocrop.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOFILTER)		+= libgstvideofilter.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOMIXER)		+= libgstvideomixer.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOPARSERSBAD)	+= libgstvideoparsersbad.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEORATE)		+= libgstvideorate.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOSCALE)		+= libgstvideoscale.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VIDEOTESTSRC)	+= libgstvideotestsrc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VOAACENC)		+= libgstvoaacenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VOAMRWBENC)		+= libgstvoamrwbenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VOLUME)		+= libgstvolume.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VORBIS)		+= libgstvorbis.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_VPX)			+= libgstvpx.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_WAVENC)		+= libgstwavenc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_WAVPACK)		+= libgstwavpack.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_WAVPARSE)		+= libgstwavparse.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_XIMAGESRC)		+= libgstximagesrc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_Y4MDEC)		+= libgsty4mdec.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_Y4MENC)		+= libgsty4menc.so
PLUGINS_$(CONFIG_USER_GSTREAMER_1_0_PLUGIN_ZBAR)		+= libgstzbar.so

all: build_targets

build/config.status:
	mkdir -p $(BUILD_DIR)
	chmod u+x $(SRC_DIR)/configure
	(cd build; ../$(SRC_DIR)/configure $(CONFIGURE_OPT);)

build_targets: build/config.status
	make -C $(BUILD_DIR)
	mkdir -p $(INSTALL_DIR)
	make -C $(BUILD_DIR) DESTDIR=`pwd`/$(INSTALL_DIR) install

romfs:
	[ -d $(ROMFSDIR)/bin ] || mkdir -p $(ROMFSDIR)/bin
	for i in $(TOOLS_y); do \
		$(ROMFSINST) $(INSTALL_DIR)/bin/$$i /bin/$$i; \
	done

	[ -d $(ROMFSDIR)/usr/lib/gstreamer-1.0 ] || \
		mkdir -p $(ROMFSDIR)/usr/lib/gstreamer-1.0
	(cd $(INSTALL_PLUGINDIR); \
		$(ROMFSINST) /usr/lib/gstreamer-1.0/libgstcoreelements.so;)

	[ -d $(ROMFSDIR)/usr/lib/gstreamer1.0/gstreamer-1.0 ] || \
		mkdir -p $(ROMFSDIR)/usr/lib/gstreamer1.0/gstreamer-1.0
	(cd $(INSTALL_PLUGINSCANNERDIR); \
		$(ROMFSINST) /usr/lib/gstreamer1.0/gstreamer-1.0/gst-plugin-scanner;)

	for i in $(PLUGINS_y); do \
		cp $(CROSS_LIBDIR)/gstreamer-1.0/$$i \
			$(ROMFSDIR)/usr/lib/gstreamer-1.0/$$i ; \
	done

	$(ROMFSINST) /etc

clean:
	-make -C $(BUILD_DIR) clean

distclean: clean
	rm -rf $(BUILD_DIR) $(INSTALL_DIR)
